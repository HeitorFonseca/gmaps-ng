<!-- <app-navbar></app-navbar> -->

<!-- Template for confirme remove property modal -->
<ng-template #removePropertyModal>
    <div class="modal-header">
        <h4> Tem certeza que deseja remover a propriedade ? </h4>
    </div>
    <div class="modal-body">
        <button class="btn btn-secondary mr-3" (click)="activeModal.close(true)">Excluir Propriedade</button>
    </div>
    <div class="modal-footer">
    </div>
</ng-template>

<div class="row">

    <div class="col-xl-6 text-xs-center">
        <div class="card card-default">
            <div class="card-header">
                Areas da propriedade
            </div>
            <div class="card-body">
                <div class="card-deck">
                    <div *ngFor="let areas of property.AreasOverlay" class="col-5 card">
                        <div class="card-body">
                            <h6> {{areas.AreaName}} </h6>
                            <p>
                                <span class="small-5 float-left"> {{areas.Area}} ha </span>
                                <span class="small-7 float-right">{{areas.HarvestType}}</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div *ngxPermissionsOnly="'ADMIN'">
            <br>
            <h6> Ações </h6>
            <input class="btn btn-primary mr-2" (click)="onEditPropertyClick()" value="Editar Propriedade" />
            <input class="btn btn-secondary" (click)="onRemoveProperty(removePropertyModal)" value="Excluir Propriedade" />
        </div>
        <br>
        <br>
        <br>
        <div>
            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <a class="nav-link active" data-toggle="tab" href="#analises">Análises</a>
                </li>   
                <li class="nav-item" *ngxPermissionsOnly="'ADMIN'">
                    <a class="nav-link" data-toggle="tab" href="#novaAnalise">Nova Análise</a>
                </li>                             
            </ul>
        </div>
        <div class="container-fluid">
                <div class="tab-content">
                    <div id="analises" class="tab-pane fade show active">
                        <br>
                        <app-calendar [analyses]=property.Analyses (selectedAnalysis)="selectedAnalysis($event)"></app-calendar>
                        <br>
                    </div>     
                    <div id="novaAnalise" class="tab-pane fade ">
                        <h5 align="center"> Análises disponíveis </h5>
                        <p align="center">Escolha as análises do seu interesse </p> 
                        <div class="row mt-4 d-flex justify-content-center">
                            <div class="btn-group " data-toggle="buttons">
                                <label class="btn btn-primary " [class.active]="checkBoxBtn.NDVI">
                                    <input type="checkbox" [(ngModel)]="checkBoxBtn.NDVI" autocomplete="off"> Mapa de produção
                                </label>
                            </div>
                        </div>
                        <div class="row d-flex justify-content-center">
                            <div class="btn-group" data-toggle="buttons">
                                <label class="btn btn-danger " [class.active]="checkBoxBtn.NDWI">
                                    <input type="checkbox" [(ngModel)]="checkBoxBtn.NDWI" autocomplete="off"> Indice de biomassa
                                </label>
                            </div>
                        </div>
                        <div class="row d-flex justify-content-center">
                            <div class="btn-group" data-toggle="buttons">
                                <label class="btn btn-success " [class.active]="checkBoxBtn.Produtividade">
                                    <input type="checkbox" [(ngModel)]="checkBoxBtn.Produtividade" autocomplete="off"> Previsão de produtividade
                                </label>
                            </div>
                        </div>
                    </div>
                                   
                </div>
            </div>

    </div>
    <div class="col-xl-6 text-xs-center">
        <div class="card card-default">
            <div class="card-body">
                <ngui-map zoom="{{mapProps.zoom}}" style="height: 400px" disableDefaultUI="true" [center]="mapProps.center" mapTypeId="satellite"
                    (mapReady$)="onMapReady($event)">
                    <data-layer>
                    </data-layer>
                </ngui-map>
            </div>
        </div>
    </div>


</div>